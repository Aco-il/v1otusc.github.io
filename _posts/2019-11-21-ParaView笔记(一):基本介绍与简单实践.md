---
layout: post
title: ParaView笔记(一):基本介绍与简单实践
---

>这是我自己看文档时做的笔记(在笔记的标准要求较低的情况下),仅仅作为备忘和查看方便.

<!-- TOC -->

- [1. Introduction](#1-introduction)
- [2. Basic of Visualization in ParaView](#2-basic-of-visualization-in-paraview)
- [3. ParaView Executables](#3-paraview-executables)
- [4. Getting started with paraview](#4-getting-started-with-paraview)
  - [4.1 ParaView Graghical user interface](#41-paraview-graghical-user-interface)
  - [4.2 Understanding with visualization process](#42-understanding-with-visualization-process)
- [5. Getting started with pvpython](#5-getting-started-with-pvpython)
- [5.1 Understanding with visualization process](#51-understanding-with-visualization-process)
- [6. Scripting in paraview](#6-scripting-in-paraview)
- [To be continued](#to-be-continued)

<!-- /TOC -->

# 1. Introduction

简单地说:

- 支持分布式计算模型
- 支持Python编写脚本
- 支持网页可视化(Para ViewWeb)
- 支持in-situ(Catalyst)
- 开源协议为BSD Lisenced
- 2000年开始由Kitware公司和LANL实验室开发,2002年十月发布了第一个release版本,ParaView0.6

# 2. Basic of Visualization in ParaView

ParaView通过VTK(Visualization Toolkit)构建,所以[了解VTK](https://v1otusc.github.io/2019/11/21/%E5%AD%A6%E4%B9%A0VTK/)非常关键,VTK可以用数据流表(data-flow diagram)来表示,下图中的每一个模块表示一种filter,算法具有input port来输入数据,具有output port来输出数据,只有output port的模块称为Reader,也叫sources,通过sources将数据传入数据处理的管道中;只有input port的模块叫做Writer,也叫sinks,通过sinks将图形渲染在屏幕上.

<center><img src="https://raw.githubusercontent.com/v1otusc/PicBed/master/VTKpipeline.png" ></center>

可以认为VTK管道由三个基本的部分组成:source,filters(提取信息)和sink.基本作用可以分别理解为产生数据,处理数据和显示数据.

# 3. ParaView Executables

运行ParaView可以输入的命令:
```
paraview
```
上面的命令表示打开使用Qt构建的GUI.
```
pvpython
```
表示打开一个可以运行ParaView的Python脚本的解释器,可以理解为用于编写脚本的ParaView.
```
pvbatch
```
与pvpython类似,区别是pvbatch是用来进行批量处理的,并且当来自source的数据可以进行MPI(跨语言的通讯协议,用于编写并行计算)编程时,pvbatch可支持并发.pvbatch需要参数指定python脚本.
```
pvsever
```
当需要完成渲染等任务时,可以将paraview连接到一个运行在服务器上的pvserver.
```
pvdataserver和pvrenderserver
```
可以看做pvserver的两个分开的可执行部分,组成pvdataserver-pvrenderserver对.

# 4. Getting started with paraview

>下面的部分需要边做边看

## 4.1 ParaView Graghical user interface

在终端输入paraview.

## 4.2 Understanding with visualization process

一个实例,创建一个source,并对数据Apply filter.

创建source,点击$Source => Geometric Shapes =>Sphere$,正常情况下会看到一个曲面.

注意:

- 这时,左下角的Properties中,Apply按钮变成了enabled和highlighted
- 实际上这时候source创建的sphere实例还没有进入数据处理的pipeline中,properties中的参数都是可以修改的,例如修改半径,然后点击Apply.

点击后,Apply按钮变暗,数据有了新的properties.再次修改并点击后,Paraview自动执行了所有的Pipeline Browser中显示的步骤,然后显示在视图中.

如果在视图中改变参数,因为仅仅会重新渲染,Apply按钮不会变成enabled(与在properties中改变参数不同).

>也可以在$Edit=>Settings=>General$中选择Auto Apply,这样就不用每次手动确认.

**Apply Filters**

点击$Filters=>$选择即可,千万不要忘了点击Apply,因为点击过后数据实例才会加入到pipeline中.

实际上,Filters中某些选项是不可用的,将鼠标移动到上面就可以显示原因.

> 忘记点Apply是最容易犯的错误

# 5. Getting started with pvpython

>以下所有的内容都适用于pvbatch.

在终端输入pvpython,然后输入
```python
from paraview.simple import *
```
就可以使用paraview相关的API了

# 5.1 Understanding with visualization process

**Creating a Source**

添加source:
```python
Sphere()
```
然后显示:
```python
Show()
Render()
```
出现一个显示曲面的窗口.

**changing properties**

改变属性的例子:
```python
SetProperties(Radius=1.0)
SetProperties(Center =[1 , 0, 0], StartTheta =100)
```
打印属性
```python
radius = GetProperty("Radius")
print(radius)
```

上述例子相当于在properties改变属性,上文中提到,在这里改变属性和在view/display窗口中更改之后的执行流程是不一样的,下面是在display窗口中改变属性和打印:

```python
SetDisplayProperties ( Opacity =0.5)
GetDisplayProperty ("Opacity" )
```

> 在paraview中,点击Apply才会重新执行pipeline中的算法,类似地,在pvpython中,每次调用Render()函数才能执行pipeline中的算法,并最终渲染到视图中.

**Applying Filters**



# 6. Scripting in paraview

# To be continued

最基本内容到这里就结束了,剩下的部分都是对上述步骤的具体说明和进一步的补充.
